{"version":3,"sources":["../src/visual/Svg.ts","../src/visual/SvgMarkers.ts","../src/visual/SvgElements.ts","../src/visual/Colour.ts","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-color/src/math.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../node_modules/d3-interpolate/src/basis.js","../node_modules/d3-interpolate/src/basisClosed.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/hsl.js","../node_modules/d3-interpolate/src/lab.js","../node_modules/d3-interpolate/src/hcl.js","../node_modules/d3-interpolate/src/cubehelix.js","../node_modules/d3-interpolate/src/piecewise.js"],"sourcesContent":["import {CirclePositioned} from \"../geometry/Circle.js\";\r\nimport {markerPrebuilt} from \"./SvgMarkers.js\";\r\nimport * as Lines from \"../geometry/Line.js\";\r\nimport * as Points from \"../geometry/Point.js\";\r\nimport * as Elements from \"./SvgElements.js\";\r\nimport * as Rects from \"~/geometry/Rect.js\";\r\n\r\nexport {Elements};\r\n\r\nexport type MarkerOpts = StrokeOpts & DrawingOpts & {\r\n  readonly id: string,\r\n  readonly markerWidth?: number,\r\n  readonly markerHeight?: number,\r\n  readonly orient?: string,\r\n  readonly viewBox?: string,\r\n  readonly refX?: number,\r\n  readonly refY?: number\r\n}\r\n\r\n/**\r\n * Drawing options\r\n */\r\nexport type DrawingOpts = {\r\n\r\n  /**\r\n   * Style for fill. Eg `black`.\r\n   * @see [fill](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill)\r\n   */\r\n  readonly fillStyle?:string\r\n  /**\r\n   * If true, debug helpers are drawn\r\n   */\r\n  readonly debug?:boolean\r\n\r\n};\r\n\r\nexport type StrokeOpts = {\r\n  /**\r\n   * Line cap\r\n   * @see [stroke-linecap](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linecap)\r\n   */\r\n  readonly strokeLineCap?: `butt` | `round` | `square`\r\n  /**\r\n   * Width of stroke, eg `2`\r\n   * @see [stroke-width](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width)\r\n   */\r\n  readonly strokeWidth?:number\r\n  /**\r\n  * Stroke dash pattern, eg `5`\r\n  * @see [stroke-dasharray](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray)\r\n  */\r\n  readonly strokeDash?:string\r\n  /**\r\n   * Style for lines. Eg `white`.\r\n   * @see [stroke](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke)\r\n   */\r\n  readonly strokeStyle?:string\r\n}\r\n\r\n/**\r\n * Line drawing options\r\n */\r\nexport type LineDrawingOpts = DrawingOpts & MarkerDrawingOpts & StrokeOpts;\r\n\r\nexport type CircleDrawingOpts = DrawingOpts & StrokeOpts & MarkerDrawingOpts;\r\n\r\nexport type PathDrawingOpts = DrawingOpts & StrokeOpts & MarkerDrawingOpts;\r\n\r\nexport type MarkerDrawingOpts = {\r\n  readonly markerEnd?:MarkerOpts\r\n  readonly markerStart?:MarkerOpts\r\n  readonly markerMid?:MarkerOpts\r\n}\r\n\r\n\r\n/**\r\n * Text drawing options\r\n */\r\nexport type TextDrawingOpts = StrokeOpts & DrawingOpts & {\r\n  readonly anchor?: `start` | `middle` | `end`\r\n  readonly align?: `text-bottom` | `text-top` | `baseline` | `top` | `hanging` | `middle`\r\n}\r\n\r\n/**\r\n * Text path drawing options\r\n */\r\nexport type TextPathDrawingOpts = TextDrawingOpts & {\r\n  readonly method?: `align` |`stretch`\r\n  readonly side?: `left` | `right`\r\n  readonly spacing?: `auto` | `exact`\r\n  readonly startOffset?: number\r\n  readonly textLength?:number\r\n}\r\n\r\n/**\r\n * Creates and appends a SVG element. \r\n * \r\n * ```js\r\n * // Create a circle\r\n * const circleEl = createOrResolve(parentEl, `SVGCircleElement`);\r\n * ```\r\n * \r\n * If `queryOrExisting` is specified, it is used as a query to find an existing element. If\r\n * query starts with `#`, this will be set as the element id, if created.\r\n * \r\n * ```js\r\n * // Creates an element with id 'myCircle' if it doesn't exist\r\n * const circleEl = createOrResolve(parentEl, `SVGCircleElement`, `#myCircle`);\r\n * ```\r\n * @param parent Parent element\r\n * @param type Type of SVG element\r\n * @param queryOrExisting Query, eg `#id`\r\n * @returns \r\n */\r\nexport const createOrResolve = <V extends SVGElement>(parent:SVGElement, type:string, queryOrExisting?:string|V):V => {\r\n  //eslint-disable-next-line functional/no-let\r\n  let existing = null;\r\n  if (queryOrExisting !== undefined) {\r\n    if (typeof queryOrExisting === `string`) existing = parent.querySelector(queryOrExisting);\r\n    else existing = queryOrExisting;\r\n  }\r\n  if (existing === null) {\r\n    const p = document.createElementNS(`http://www.w3.org/2000/svg`, type) as V;\r\n    parent.appendChild(p);\r\n    if (queryOrExisting && typeof queryOrExisting === `string`) {\r\n      //eslint-disable-next-line functional/immutable-data\r\n      if (queryOrExisting.startsWith(`#`)) p.id = queryOrExisting.substring(1);\r\n    }\r\n    return p;\r\n  }\r\n  return existing as V;\r\n};\r\n\r\nexport const remove = <V extends SVGElement>(parent:SVGElement, queryOrExisting:string|V) => {\r\n  if (typeof queryOrExisting === `string`) {\r\n    const e = parent.querySelector(queryOrExisting);\r\n    if (e === null) return;\r\n    e.remove();\r\n  } else {\r\n    queryOrExisting.remove();\r\n  }\r\n};\r\n\r\n/**\r\n * Creates an element of `type` and with `id` (if specified)\r\n * @param type Element type, eg `circle` \r\n * @param id Optional id to assign to element\r\n * @returns Element\r\n */\r\nexport const createEl = <V extends SVGElement>(type:string, id?:string):V => {\r\n  const m = document.createElementNS(`http://www.w3.org/2000/svg`, type) as V;\r\n  if (id) {\r\n    //eslint-disable-next-line functional/immutable-data\r\n    m.id = id;\r\n  }\r\n  return m;\r\n};\r\n\r\n/**\r\n * Applies path drawing options to given element\r\n * Applies: markerEnd, markerStart, markerMid\r\n * @param elem Element (presumed path)\r\n * @param opts Options\r\n */\r\nexport const applyPathOpts = (elem:SVGElement, opts:PathDrawingOpts) => {\r\n  if (opts.markerEnd) elem.setAttribute(`marker-end`, markerPrebuilt(elem, opts.markerEnd, opts as DrawingOpts));\r\n  if (opts.markerStart) elem.setAttribute(`marker-end`, markerPrebuilt(elem, opts.markerStart, opts as DrawingOpts));\r\n  if (opts.markerMid) elem.setAttribute(`marker-end`, markerPrebuilt(elem, opts.markerMid, opts as DrawingOpts));\r\n};\r\n\r\n/**\r\n * Applies drawing options to given SVG element.\r\n * Applies: fillStyle, strokeStyle, strokeWidth, strokeDash\r\n * @param elem Element\r\n * @param opts Drawing options\r\n */\r\nexport const applyOpts = (elem:SVGElement, opts:DrawingOpts) => {\r\n  if (opts.fillStyle) elem.setAttributeNS(null, `fill`, opts.fillStyle);\r\n};\r\n\r\nexport const applyStrokeOpts = (elem:SVGElement, opts:StrokeOpts) => {\r\n  if (opts.strokeStyle) elem.setAttributeNS(null, `stroke`, opts.strokeStyle);\r\n  if (opts.strokeWidth) elem.setAttributeNS(null, `stroke-width`, opts.strokeWidth.toString());\r\n  if (opts.strokeDash) elem.setAttribute(`stroke-dasharray`, opts.strokeDash);\r\n  if (opts.strokeLineCap) elem.setAttribute(`stroke-linecap`, opts.strokeLineCap);\r\n};\r\n\r\n/**\r\n * Helper to make SVG elements with a common parent.\r\n *\r\n * Create with {@link makeHelper}.\r\n */\r\nexport type SvgHelper = {\r\n  remove(queryOrExisting:string|SVGElement):void\r\n  /**\r\n   * Creates a text element\r\n   * @param text Text\r\n   * @param pos Position\r\n   * @param opts Drawing options\r\n   * @param queryOrExisting DOM query to look up existing element, or the element instance \r\n   */\r\n  text(text:string, pos:Points.Point, opts?:TextDrawingOpts, queryOrExisting?:string|SVGTextElement):SVGTextElement\r\n  /**\r\n   * Creates text on a path\r\n   * @param pathRef Reference to path element\r\n   * @param text Text\r\n   * @param opts Drawing options\r\n   * @param queryOrExisting DOM query to look up existing element, or the element instance \r\n   */\r\n  textPath(pathRef:string, text:string, opts?:TextDrawingOpts, queryOrExisting?:string|SVGTextPathElement):SVGTextPathElement\r\n  /**\r\n   * Creates a line\r\n   * @param line Line\r\n   * @param opts Drawing options\r\n   * @param queryOrExisting DOM query to look up existing element, or the element instance \r\n   */\r\n  line(line:Lines.Line, opts?:LineDrawingOpts, queryOrExisting?:string|SVGLineElement):SVGLineElement\r\n  /**\r\n   * Creates a circle\r\n   * @param circle Circle\r\n   * @param opts Drawing options\r\n   * @param queryOrExisting DOM query to look up existing element, or the element instance \r\n   */\r\n  circle(circle:CirclePositioned, opts?:CircleDrawingOpts, queryOrExisting?:string|SVGCircleElement):SVGCircleElement\r\n  /**\r\n   * Creates a path\r\n   * @param svgStr Path description, or empty string\r\n   * @param opts Drawing options\r\n   * @param queryOrExisting DOM query to look up existing element, or the element instance \r\n   */\r\n  path(svgStr:string|readonly string[], opts?:PathDrawingOpts, queryOrExisting?:string|SVGPathElement) :SVGPathElement\r\n  /**\r\n   * Creates a grid of horizontal and vertical lines inside of a group\r\n   * @param center Grid origin\r\n   * @param spacing Cell size\r\n   * @param width Width of grid\r\n   * @param height Height of grid\r\n   * @param opts Drawing options\r\n   */\r\n  grid(center:Points.Point, spacing:number, width:number, height:number, opts?:LineDrawingOpts):SVGGElement\r\n  /**\r\n   * Returns an element if it exists in parent\r\n   * @param selectors Eg `#path`\r\n   */\r\n  query<V extends SVGElement>(selectors:string):V|null\r\n  /**\r\n   * Gets the width of the parent\r\n   */\r\n  get width():number \r\n  /**\r\n   * Sets the width of the parent\r\n   */\r\n  set width(width:number) \r\n  /**\r\n   * Gets the parent\r\n   */\r\n  get parent():SVGElement\r\n  /**\r\n   * Gets the height of the parent\r\n   */ \r\n  get height():number \r\n  /**\r\n   * Sets the height of the parent\r\n   */\r\n  set height(height:number) \r\n  /**\r\n   * Deletes all child elements\r\n   */\r\n  clear():void \r\n};\r\n\r\n/**\r\n * Get the bounds of an SVG element (determined by its width/height attribs)\r\n * @param svg\r\n * @returns \r\n */\r\nexport const getBounds = (svg:SVGElement):Rects.Rect => {\r\n  const w = svg.getAttributeNS(null, `width`);\r\n  const width = w === null ? 0 : parseFloat(w);\r\n  const h = svg.getAttributeNS(null, `height`);\r\n  const height = h === null ? 0 : parseFloat(h);\r\n  return { width, height};\r\n};\r\n\r\n/**\r\n * Set the bounds of an element, using its width/height attribs.\r\n * @param svg\r\n * @param bounds \r\n */\r\nexport const setBounds = (svg:SVGElement, bounds:Rects.Rect):void => {\r\n  svg.setAttributeNS(null, `width`, bounds.width.toString());\r\n  svg.setAttributeNS(null, `height`, bounds.height.toString());\r\n};\r\n\r\n/**\r\n * @inheritdoc SvgHelper\r\n * @param parent \r\n * @param parentOpts \r\n * @returns \r\n */\r\nexport const makeHelper = (parent:SVGElement, parentOpts?:DrawingOpts & StrokeOpts):SvgHelper => {\r\n  if (parentOpts) {\r\n    applyOpts(parent, parentOpts);\r\n    applyStrokeOpts(parent, parentOpts);\r\n  }\r\n  \r\n  const o = {\r\n    remove:(queryOrExisting:string|SVGElement) => remove(parent, queryOrExisting),\r\n    text:(text:string, pos:Points.Point, opts?:TextDrawingOpts, queryOrExisting?:string|SVGTextElement) => Elements.text(text, parent, pos, opts, queryOrExisting),\r\n    textPath:(pathRef:string, text:string, opts?:TextDrawingOpts, queryOrExisting?:string|SVGTextPathElement) => Elements.textPath(pathRef, text, parent, opts, queryOrExisting),\r\n    line:(line:Lines.Line, opts?:LineDrawingOpts, queryOrExisting?:string|SVGLineElement) => Elements.line(line, parent, opts, queryOrExisting),\r\n    circle:(circle:CirclePositioned, opts?:CircleDrawingOpts, queryOrExisting?:string|SVGCircleElement) => Elements.circle(circle, parent, opts,  queryOrExisting),\r\n    path:(svgStr:string|readonly string[], opts?:PathDrawingOpts, queryOrExisting?:string|SVGPathElement) => Elements.path(svgStr, parent, opts, queryOrExisting),\r\n    grid:(center:Points.Point, spacing:number, width:number, height:number, opts?:LineDrawingOpts) => Elements.grid(parent, center, spacing, width, height, opts),\r\n    query:<V extends SVGElement>(selectors:string):V|null => parent.querySelector(selectors),\r\n    get width():number {\r\n      const w = parent.getAttributeNS(null, `width`);\r\n      if (w === null) return 0;\r\n      return parseFloat(w);\r\n    },\r\n    set width(width:number) {\r\n      parent.setAttributeNS(null, `width`, width.toString());\r\n    },\r\n    get parent():SVGElement {\r\n      return parent;\r\n    },\r\n    get height():number {\r\n      const w = parent.getAttributeNS(null, `height`);\r\n      if (w === null) return 0;\r\n      return parseFloat(w);\r\n    },\r\n    set height(height:number) {\r\n      parent.setAttributeNS(null, `height`, height.toString());\r\n    },\r\n    clear: () => {\r\n      //eslint-disable-next-line functional/no-loop-statement\r\n      while (parent.firstChild) {\r\n        parent.removeChild(parent.lastChild as HTMLElement);\r\n      }\r\n    }\r\n  };\r\n  return o;\r\n};\r\n\r\n","\r\nimport {createOrResolve, MarkerOpts, createEl, DrawingOpts, applyOpts} from './Svg.js';\r\n\r\nexport const createMarker = (id:string, opts:MarkerOpts, childCreator?:()=>SVGElement):SVGMarkerElement => {\r\n  const m = createEl<SVGMarkerElement>(`marker`, id);\r\n  \r\n  if (opts.markerWidth) m.setAttribute(`markerWidth`, opts.markerWidth?.toString());\r\n  if (opts.markerHeight) m.setAttribute(`markerHeight`, opts.markerHeight?.toString());\r\n  if (opts.orient) m.setAttribute(`orient`, opts.orient.toString());\r\n  else m.setAttribute(`orient`, `auto-start-reverse`);\r\n\r\n  if (opts.viewBox) m.setAttribute(`viewBox`, opts.viewBox.toString());\r\n  if (opts.refX) m.setAttribute(`refX`, opts.refX.toString());\r\n  if (opts.refY) m.setAttribute(`refY`, opts.refY.toString());\r\n\r\n  if (childCreator) {\r\n    const c = childCreator();\r\n    m.appendChild(c);\r\n  }\r\n  return m;\r\n};\r\n\r\nexport const markerPrebuilt = (elem: SVGElement | null, opts: MarkerOpts, _context: DrawingOpts): string => {\r\n  if (elem === null) return `(elem null)`;\r\n\r\n  const parent = elem.ownerSVGElement;\r\n  if (parent === null) throw new Error(`parent for elem is null`);\r\n  const defsEl = createOrResolve<SVGDefsElement>(parent, `defs`, `defs`);\r\n\r\n  //eslint-disable-next-line functional/no-let\r\n  let defEl = defsEl.querySelector(`#${opts.id}`) as SVGElement | null;\r\n\r\n  if (defEl !== null) {\r\n    return `url(#${opts.id})`;\r\n  }\r\n\r\n  if (opts.id === `triangle`) {\r\n    opts = {...opts, strokeStyle: `transparent`};\r\n    if (!opts.markerHeight) opts = {...opts, markerHeight: 6};\r\n    if (!opts.markerWidth) opts = {...opts, markerWidth: 6};\r\n    if (!opts.refX) opts = {...opts, refX: opts.markerWidth};\r\n    if (!opts.refY) opts = {...opts, refY: opts.markerHeight};\r\n    if (!opts.fillStyle || opts.fillStyle === `none`) opts = {...opts, fillStyle: `black`};\r\n    if (!opts.viewBox) opts = {...opts, viewBox: `0 0 10 10`};\r\n\r\n    defEl = createMarker(opts.id, opts, () => {\r\n      const tri = createEl<SVGPathElement>(`path`);\r\n      tri.setAttribute(`d`, `M 0 0 L 10 5 L 0 10 z`);\r\n      if (opts) applyOpts(tri, opts);\r\n      return tri;\r\n    });\r\n  } else throw new Error(`Do not know how to make ${opts.id}`);\r\n\r\n  //eslint-disable-next-line functional/immutable-data\r\n  defEl.id = opts.id;\r\n  defsEl.appendChild(defEl);\r\n\r\n  return `url(#${opts.id})`;\r\n};\r\n","\r\nimport {CirclePositioned} from \"../geometry/Circle.js\";\r\nimport * as Lines from \"../geometry/Line.js\";\r\nimport * as Points from \"../geometry/Point.js\";\r\nimport * as Svg from \"./Svg.js\";\r\nimport { getCssVariable } from \"./Colour.js\";\r\n//import {Palette} from \".\";\r\n\r\n\r\nconst numOrPercentage = (v:number):string => {\r\n  if (v >= 0 && v <= 1) return (v*100) + `%`;\r\n  return v.toString();\r\n};\r\n\r\n/**\r\n * Creates and adds an SVG path element\r\n * @example\r\n * ```js\r\n * const paths = [\r\n *  `M300,200`,\r\n *  `a25,25 -30 0,1 50, -25 l 50,-25`\r\n * ]\r\n * const pathEl = path(paths, parentEl);\r\n * ```\r\n * @param svgOrArray Path syntax, or array of paths. Can be empty if path data will be added later\r\n * @param parent SVG parent element\r\n * @param opts Options Drawing options\r\n * @returns \r\n */\r\nexport const path = (svgOrArray: string | readonly string[], parent: SVGElement, opts?: Svg.PathDrawingOpts, queryOrExisting?: string | SVGPathElement): SVGPathElement => {\r\n  const elem = Svg.createOrResolve<SVGPathElement>(parent, `path`, queryOrExisting);\r\n  const svg = typeof svgOrArray === `string` ? svgOrArray : svgOrArray.join(`\\n`);\r\n\r\n  elem.setAttributeNS(null, `d`, svg);\r\n  parent.appendChild(elem);\r\n  return pathUpdate(elem, opts);\r\n};\r\n\r\nexport const pathUpdate = (elem:SVGPathElement, opts?:Svg.PathDrawingOpts) => {\r\n  if (opts) Svg.applyOpts(elem, opts);\r\n  if (opts) Svg.applyStrokeOpts(elem, opts);\r\n  return elem;\r\n};\r\n\r\n/**\r\n * Updates an existing `SVGCircleElement` with potentially updated circle data and drawing options\r\n * @param elem Element\r\n * @param circle Circle\r\n * @param opts Drawing options\r\n * @returns SVGCircleElement\r\n */\r\nexport const circleUpdate = (elem: SVGCircleElement, circle: CirclePositioned, opts?: Svg.CircleDrawingOpts) => {\r\n  elem.setAttributeNS(null, `cx`, circle.x.toString());\r\n  elem.setAttributeNS(null, `cy`, circle.y.toString());\r\n  elem.setAttributeNS(null, `r`, circle.radius.toString());\r\n  if (opts) Svg.applyOpts(elem, opts);\r\n  if (opts) Svg.applyStrokeOpts(elem, opts);\r\n\r\n  return elem;\r\n};\r\n\r\n/**\r\n * Creates or reuses a `SVGCircleElement`.\r\n * \r\n * To update an existing element, use `circleUpdate`\r\n * @param circle \r\n * @param parent \r\n * @param opts \r\n * @param queryOrExisting \r\n * @returns \r\n */\r\nexport const circle = (circle: CirclePositioned, parent: SVGElement, opts?: Svg.DrawingOpts, queryOrExisting?: string | SVGCircleElement): SVGCircleElement => {\r\n  const p = Svg.createOrResolve<SVGCircleElement>(parent, `circle`, queryOrExisting);\r\n  return circleUpdate(p, circle, opts);\r\n};\r\n\r\n/**\r\n * Creates or reuses a SVGLineElement.\r\n * \r\n * @param line \r\n * @param parent \r\n * @param opts \r\n * @param queryOrExisting \r\n * @returns \r\n */\r\nexport const line = (line: Lines.Line, parent: SVGElement, opts?: Svg.LineDrawingOpts, queryOrExisting?: string | SVGLineElement): SVGLineElement => {\r\n  const lineEl = Svg.createOrResolve<SVGLineElement>(parent, `line`, queryOrExisting);\r\n  return lineUpdate(lineEl, line, opts);\r\n};\r\n\r\n/**\r\n * Updates a SVGLineElement instance with potentially changed line and drawing data\r\n * @param lineEl\r\n * @param line \r\n * @param opts \r\n * @returns \r\n */\r\nexport const lineUpdate = (lineEl:SVGLineElement, line:Lines.Line, opts?:Svg.LineDrawingOpts) => {\r\n  lineEl.setAttributeNS(null, `x1`, line.a.x.toString());\r\n  lineEl.setAttributeNS(null, `y1`, line.a.y.toString());\r\n  lineEl.setAttributeNS(null, `x2`, line.b.x.toString());\r\n  lineEl.setAttributeNS(null, `y2`, line.b.y.toString());\r\n  if (opts) Svg.applyOpts(lineEl, opts);\r\n  if (opts) Svg.applyPathOpts(lineEl, opts);\r\n  if (opts) Svg.applyStrokeOpts(lineEl, opts);\r\n  return lineEl;\r\n};\r\n\r\n/**\r\n * Updates an existing SVGTextPathElement instance with text and drawing options\r\n * @param el \r\n * @param text \r\n * @param opts \r\n * @returns \r\n */\r\nexport const textPathUpdate = (el:SVGTextPathElement, text?:string, opts?:Svg.TextPathDrawingOpts) => {\r\n  if (opts?.method) el.setAttributeNS(null, `method`, opts.method);\r\n  if (opts?.side) el.setAttributeNS(null, `side`, opts.side);\r\n  if (opts?.spacing) el.setAttributeNS(null, `spacing`, opts.spacing);\r\n  if (opts?.startOffset) {\r\n    el.setAttributeNS(null, `startOffset`, numOrPercentage(opts.startOffset));\r\n  }\r\n  if (opts?.textLength) el.setAttributeNS(null, `textLength`, numOrPercentage(opts.textLength));\r\n  \r\n  if (text) {\r\n    //eslint-disable-next-line functional/immutable-data\r\n    el.textContent = text;\r\n  }\r\n  if (opts) Svg.applyOpts(el, opts);\r\n  if (opts) Svg.applyStrokeOpts(el, opts);\r\n  return el;\r\n};\r\n\r\n/**\r\n * Creates or reuses a SVGTextPathElement.\r\n * @param pathRef \r\n * @param text \r\n * @param parent \r\n * @param opts \r\n * @param queryOrExisting \r\n * @returns \r\n */\r\nexport const textPath = (pathRef:string, text:string, parent:SVGElement, opts?:Svg.TextPathDrawingOpts, queryOrExisting?:string|SVGTextPathElement):SVGTextPathElement => {\r\n  const textEl = Svg.createOrResolve<SVGTextElement>(parent, `text`, queryOrExisting+`-text`);\r\n  // Update text properties, but don't pass in position or text\r\n  textUpdate(textEl, undefined, undefined, opts);\r\n  \r\n  const p = Svg.createOrResolve<SVGTextPathElement>(textEl, `textPath`, queryOrExisting);\r\n  p.setAttributeNS(null, `href`, pathRef);\r\n  return textPathUpdate(p, text, opts);\r\n};\r\n\r\n/**\r\n * Updates an existing SVGTextElement instance with position, text and drawing options\r\n * @param el \r\n * @param pos \r\n * @param text \r\n * @param opts \r\n * @returns \r\n */\r\nexport const textUpdate = (el:SVGTextElement, pos?:Points.Point, text?:string, opts?:Svg.TextDrawingOpts) => {\r\n  if (pos) {\r\n    el.setAttributeNS(null, `x`, pos.x.toString());\r\n    el.setAttributeNS(null, `y`, pos.y.toString());  \r\n  }\r\n  if (text) {\r\n    //eslint-disable-next-line functional/immutable-data\r\n    el.textContent = text;\r\n  }\r\n\r\n  if (opts) {\r\n    Svg.applyOpts(el, opts);\r\n    if (opts) Svg.applyStrokeOpts(el, opts);\r\n\r\n    if (opts.anchor) el.setAttributeNS(null, `text-anchor`, opts.anchor);\r\n    if (opts.align) el.setAttributeNS(null, `alignment-baseline`, opts.align);\r\n  }\r\n  return el;\r\n};\r\n\r\n/**\r\n * Creates or reuses a SVGTextElement\r\n * @param pos Position of text\r\n * @param text Text\r\n * @param parent \r\n * @param opts \r\n * @param queryOrExisting \r\n * @returns \r\n */\r\nexport const text = (text:string, parent:SVGElement, pos?:Points.Point, opts?:Svg.TextDrawingOpts, queryOrExisting?:string|SVGTextElement): SVGTextElement => {\r\n  const p = Svg.createOrResolve<SVGTextElement>(parent, `text`, queryOrExisting);\r\n  return textUpdate(p, pos, text, opts);  \r\n};\r\n\r\n/**\r\n * Creates a square grid based at a center point, with cells having `spacing` height and width.\r\n * \r\n * It fits in as many cells as it can within `width` and `height`.\r\n * \r\n * Returns a SVG group, consisting of horizontal and vertical lines\r\n * @param parent Parent element\r\n * @param center Center point of grid\r\n * @param spacing Width/height of cells\r\n * @param width How wide grid should be\r\n * @param height How high grid should be\r\n * @param opts \r\n */\r\nexport const grid = (parent:SVGElement, center: Points.Point, spacing: number, width: number, height: number, opts:Svg.LineDrawingOpts = {}) => {\r\n  if (!opts.strokeStyle) opts = {...opts, strokeStyle: getCssVariable(`bg-dim`, `silver`) };\r\n  if (!opts.strokeWidth) opts = {...opts, strokeWidth: 1};\r\n\r\n  const g = Svg.createEl<SVGGElement>(`g`);\r\n  Svg.applyOpts(g, opts);\r\n  Svg.applyPathOpts(g, opts);\r\n  Svg.applyStrokeOpts(g, opts);\r\n\r\n  // Horizontals\r\n  //eslint-disable-next-line functional/no-let\r\n  let y = 0;\r\n  //eslint-disable-next-line functional/no-loop-statement\r\n  while (y < height) {\r\n    const horiz = Lines.fromNumbers(0, y, width, y);\r\n    line(horiz, g);\r\n    y += spacing;\r\n  }\r\n\r\n  // Verticals\r\n  //eslint-disable-next-line functional/no-let\r\n  let x = 0;\r\n  //eslint-disable-next-line functional/no-loop-statement\r\n  while (x < width) {\r\n    const vert = Lines.fromNumbers(x, 0, x, height);\r\n    line(vert, g);\r\n    x += spacing;\r\n  }\r\n  parent.appendChild(g);\r\n  return g;\r\n};\r\n","/* eslint-disable */\r\nimport * as d3Colour from 'd3-color';\r\nimport * as d3Interpolate from 'd3-interpolate';\r\nimport {number as guardNumber} from '../Guards.js'\r\n\r\nexport type Hsl = {h:number, s:number, l:number, opacity?:number};\r\nexport type Rgb = {r:number, g:number, b:number, opacity?:number}\r\nexport type Spaces = `hsl` | `rgb` | `lab` | `hcl` | `cubehelix`;\r\n/**\r\n * @private\r\n */\r\nexport type Colour = d3Colour.RGBColor | d3Colour.HSLColor;\r\n\r\n/**\r\n * A representation of colour. Eg: `blue`, `rgb(255,0,0)`, `hsl(20,100%,50%)`\r\n */\r\nexport type Colourish = string|d3Colour.ColorCommonInstance;\r\n\r\n/**\r\n * Options for interpolation\r\n */\r\nexport type InterpolationOpts = {\r\n  /**\r\n   * Gamma correction. Eg 4 brightens values. Only applies to rgb and cubehelix\r\n   * [Read more](https://github.com/d3/d3-interpolate#interpolate_gamma)\r\n   */\r\n  gamma?:number\r\n  /**\r\n   * Colour space\r\n   */\r\n  space?:Spaces\r\n  /**\r\n   * If true, interpolation happens the longer distance. Only applies to hsl, hcl and cubehelix\r\n   */\r\n  long?:boolean\r\n}\r\n\r\n/**\r\n * Parses colour to {h,s,l}. `opacity` field is added if it exists on source.\r\n * @param colour \r\n * @returns \r\n */\r\nexport const toHsl = (colour:Colourish):Hsl => {\r\n  const rgb = toRgb(colour);\r\n  const hsl = rgbToHsl(rgb.r, rgb.b, rgb.g);\r\n  if (rgb.opacity) return {...hsl, opacity: rgb.opacity};\r\n  else return hsl;\r\n}\r\n\r\n/**\r\n * Parses colour to {r,g,b}. `opacity` field is added if it exists on source.\r\n * @param colour \r\n * @returns \r\n */\r\nexport const toRgb = (colour:Colourish):Rgb => {\r\n  const c = resolveColour(colour);\r\n  const rgb = c.rgb();\r\n  if (c.opacity < 1) return {r:rgb.r, g:rgb.g, b:rgb.b, opacity: c.opacity};\r\n  else return {r:rgb.r, g:rgb.g, b:rgb.b}\r\n}\r\n\r\nconst resolveColour = (c:Colourish):Colour => {\r\n  if (typeof c === `string`) {\r\n    const css = d3Colour.color(c);\r\n    if (css !== null) return css;\r\n  } else {\r\n    if (isHsl(c)) return d3Colour.hsl(c.h, c.s, c.l);\r\n    if (isRgb(c)) return d3Colour.rgb(c.r, c.g, c.b); \r\n  }\r\n  throw new Error(`Could not resolve colour ${JSON.stringify(c)}`);\r\n}\r\n\r\n/**\r\n * Returns a colour in hex format `#000000`\r\n * @param colour\r\n * @returns Hex format, including #\r\n */\r\nexport const toHex = (colour:Colourish):string => {\r\n  const c = resolveColour(colour);\r\n  return c.formatHex();\r\n}\r\n\r\n/**\r\n * Returns a variation of colour with its opacity multiplied by `amt`.\r\n * \r\n * ```js\r\n * // Return a colour string for blue that is 50% opaque\r\n * opacity(`blue`, 0.5);\r\n * // eg: `rgba(0,0,255,0.5)`\r\n * \r\n * // Returns a colour string that is 50% more opaque\r\n * opacity(`hsla(200,100%,50%,50%`, 0.5);\r\n * // eg: `hsla(200,100%,50%,25%)` \r\n * ```\r\n * @param colour A valid CSS colour\r\n * @param amt Amount to multiply opacity by\r\n * @returns String representation of colour\r\n */\r\nexport const opacity = (colour:Colourish, amt:number):string => {\r\n  const c = resolveColour(colour);\r\n  c.opacity *= amt;\r\n  return c.toString(); \r\n}\r\n\r\n/**\r\n * Gets a CSS variable.\r\n * @example Fetch --accent variable, or use `yellow` if not found.\r\n * ```\r\n * getCssVariable(`accent`, `yellow`);\r\n * ```\r\n * @param name Name of variable. Do not starting `--`\r\n * @param fallbackColour Fallback colour if not found\r\n * @param root  Element to search variable from\r\n * @returns Colour or fallback.\r\n */\r\n export const getCssVariable = (name:string, fallbackColour:string = `black`, root?:HTMLElement):string => {\r\n  if (root === undefined) root = document.body;\r\n  const fromCss = getComputedStyle(root).getPropertyValue(`--${name}`).trim();\r\n  if (fromCss === undefined || fromCss.length === 0) return fallbackColour;\r\n  return fromCss;\r\n};\r\n\r\n/**\r\n * Interpolates between two colours, returning a string\r\n * \r\n * @example\r\n * ```js\r\n * // Get 50% between blue and red\r\n * interpolate(0.5, `blue`, `red`); \r\n * \r\n * // Get midway point, with specified colour space\r\n * interpolate(0.5, `hsl(200, 100%, 50%)`, `pink`, {space: `hcl`});\r\n * ```\r\n * @param amount Amount (0 = from, 0.5 halfway, 1= to)\r\n * @param from Starting colour\r\n * @param to Final colour\r\n * @param optsOrSpace Options for interpolation, or string name for colour space, eg `hsl`.\r\n * @returns String representation of colour, eg. `rgb(x,x,x)`\r\n */\r\nexport const interpolate = (amount:number, from:Colourish, to:Colourish, optsOrSpace?:string|InterpolationOpts):string => {\r\n  guardNumber(amount, `percentage`, `amount`);\r\n  if (typeof from !== `string`) throw new Error(`Expected string for 'from' param`);\r\n  if (typeof to !== `string`) throw new Error(`Expected string for 'to' param`);\r\n\r\n  let opts:InterpolationOpts;\r\n  if (typeof optsOrSpace === `undefined`) opts = {};\r\n  else if (typeof optsOrSpace === `string`) opts = { space: optsOrSpace as Spaces};\r\n  else opts = optsOrSpace as InterpolationOpts;\r\n\r\n\r\n  const inter = getInterpolator(opts, [from, to]);\r\n  if (inter === undefined) throw new Error(`Could not handle colour/space`);\r\n  return inter(amount);\r\n}\r\n\r\nconst getInterpolator = (optsOrSpace:InterpolationOpts|string, colours:Colourish[]): ((t: number) => string) | undefined => {\r\n  if (!Array.isArray(colours)) throw new Error(`Expected one or more colours as parameters`);\r\n  \r\n  let opts:InterpolationOpts;\r\n  if (typeof optsOrSpace === `undefined`) opts = {};\r\n  else if (typeof optsOrSpace === `string`) opts = { space: optsOrSpace as Spaces};\r\n  else opts = optsOrSpace as InterpolationOpts;\r\n\r\n  if (!Array.isArray(colours)) throw new Error(`Expected array for colours parameter`);\r\n  if (colours.length < 2) throw new Error(`Interpolation expects at least two colours`);\r\n  const {space = `rgb`, long = false} = opts;\r\n  let inter;\r\n\r\n  switch (space) {\r\n  case `lab`:\r\n    inter = d3Interpolate.interpolateLab;\r\n    break;\r\n  case `hsl`:\r\n    inter = long ? d3Interpolate.interpolateHslLong : d3Interpolate.interpolateHsl;\r\n    break;\r\n  case `hcl`:\r\n    inter = long ? d3Interpolate.interpolateHclLong : d3Interpolate.interpolateHcl;\r\n    break;\r\n  case `cubehelix`:\r\n    inter = long ? d3Interpolate.interpolateCubehelixLong : d3Interpolate.interpolateCubehelix;\r\n    break;\r\n  case `rgb`:\r\n    inter = d3Interpolate.interpolateRgb;\r\n  default:\r\n    inter = d3Interpolate.interpolateRgb;\r\n  }\r\n\r\n  if (opts.gamma) {\r\n    if (space === `rgb` || space === `cubehelix`) {\r\n      inter = (inter as d3Interpolate.ColorGammaInterpolationFactory).gamma(opts.gamma);      \r\n    }\r\n  }\r\n\r\n  if (colours.length > 2) {\r\n    return d3Interpolate.piecewise(inter, colours);\r\n  } else return inter(colours[0], colours[1]);\r\n}\r\n\r\n/**\r\n * Produces a scale of colours as a string array\r\n * \r\n * @example\r\n * ```js\r\n * // Yields array of 5 colour strings\r\n * const s = scale(5, {space:`hcl`}, `blue`, `red`);\r\n * // Produces scale between three colours\r\n * const s = scale(5, {space:`hcl`}, `blue`, `yellow`, `red`);\r\n * ```\r\n * @param steps Number of colours\r\n * @param opts Options for interpolation, or string colour space eg `hsl`\r\n * @param colours From/end colours (or more)\r\n * @returns \r\n */\r\nexport const scale = (steps:number, opts:InterpolationOpts|string, ...colours:Colourish[]):string[] => {\r\n  guardNumber(steps, `aboveZero`, `steps`);\r\n  if (!Array.isArray(colours)) throw new Error(`Expected one or more colours as parameters`);\r\n  const inter = getInterpolator(opts, colours);\r\n  if (inter === undefined) throw new Error(`Could not handle colour/space`);\r\n\r\n  const perStep = 1/(steps-1);\r\n  const r = [];\r\n  //eslint-disable-next-line functional/no-let\r\n  let amt = 0;\r\n  //eslint-disable-next-line functional/no-loop-statement,functional/no-let\r\n  for (let i=0; i<steps; i++) {\r\n    //eslint-disable-next-line functional/immutable-data\r\n    r.push(inter(amt));\r\n    amt += perStep;\r\n    if (amt > 1) amt = 1;\r\n  }\r\n  return r;\r\n}\r\n\r\nconst isHsl = (p: Colour|d3Colour.ColorCommonInstance|Hsl): p is Hsl => {\r\n  if ((p as Hsl).h === undefined) return false;\r\n  if ((p as Hsl).s === undefined) return false;\r\n  if ((p as Hsl).l === undefined) return false;\r\n  return true;\r\n};\r\n\r\nconst isRgb = (p: Colour|d3Colour.ColorCommonInstance|Rgb): p is Rgb => {\r\n  if ((p as Rgb).r === undefined) return false;\r\n  if ((p as Rgb).g === undefined) return false;\r\n  if ((p as Rgb).b === undefined) return false;\r\n  return true;\r\n};\r\n\r\n\r\nconst rgbToHsl = (r:number, g:number, b:number):Hsl => {\r\n  r /= 255;\r\n  g /= 255;\r\n  b /= 255;\r\n\r\n  var min = Math.min(r, g, b),\r\n    max = Math.max(r, g, b),\r\n    delta = max - min,\r\n    h, s, l;\r\n\r\n  h = 0;\r\n  if (max === min) {\r\n    h = 0;\r\n  }\r\n  else if (r === max) {\r\n    h = (g - b) / delta;\r\n  }\r\n  else if (g === max) {\r\n    h = 2 + (b - r) / delta;\r\n  }\r\n  else if (b === max) {\r\n    h = 4 + (r - g) / delta;\r\n  }\r\n\r\n  h = Math.min(h * 60, 360);\r\n\r\n  if (h < 0) {\r\n    h += 360;\r\n  }\r\n\r\n  l = (min + max) / 2;\r\n\r\n  if (max === min) {\r\n    s = 0;\r\n  }\r\n  else if (l <= 0.5) {\r\n    s = delta / (max + min);\r\n  }\r\n  else {\r\n    s = delta / (2 - max - min);\r\n  }\r\n\r\n  return {h, s, l};\r\n};\r\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {lab as colorLab} from \"d3-color\";\nimport color from \"./color.js\";\n\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {default as value} from \"./value.js\";\n\nexport default function piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = value;\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n"],"mappings":"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","names":[]}